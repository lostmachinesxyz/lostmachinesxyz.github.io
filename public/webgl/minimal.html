<html>
  <body onload="init()">
    <canvas id="c"></canvas>
  </body>

  <script>
    const vst = `
    attribute vec2 vPos;

    void main() {
      gl_Position = vec4(vPos, 0., 1.);
    }
    `

    const fst = `
    precision mediump float;

    void main() {
      gl_FragColor = vec4(0., 1., 0., 1.);
    }
    `

    function init() {
      const canvas = document.getElementById('c')
      const gl = canvas.getContext('webgl')

      gl.clearColor(1, 1, 1, 1)
      gl.clear(gl.COLOR_BUFFER_BIT)

      const vs = gl.createShader(gl.VERTEX_SHADER)
      gl.shaderSource(vs, vst)
      gl.compileShader(vs)
      console.assert(
        gl.getShaderParameter(vs, gl.COMPILE_STATUS),
        gl.getShaderInfoLog(vs)
      )

      const fs = gl.createShader(gl.FRAGMENT_SHADER)
      gl.shaderSource(fs, fst)
      gl.compileShader(fs)
      console.assert(
        gl.getShaderParameter(fs, gl.COMPILE_STATUS),
        gl.getShaderInfoLog(fs)
      )

      const program = gl.createProgram()
      gl.attachShader(program, vs)
      gl.attachShader(program, fs)
      gl.linkProgram(program)
      console.assert(
        gl.getProgramParameter(program, gl.LINK_STATUS),
        gl.getProgramInfoLog(program)
      )

      const vertices = new Float32Array([0, 1, -1, -1, 1, -1])

      const vb = gl.createBuffer()
      gl.bindBuffer(gl.ARRAY_BUFFER, vb)

      gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW)

      const vPos = gl.getAttribLocation(program, 'vPos')
      gl.vertexAttribPointer(vPos, 2, gl.FLOAT, gl.FALSE, 0, 0)
      gl.enableVertexAttribArray(vPos)

      gl.useProgram(program)
      gl.drawArrays(gl.TRIANGLES, 0, 3)
    }
  </script>
</html>
